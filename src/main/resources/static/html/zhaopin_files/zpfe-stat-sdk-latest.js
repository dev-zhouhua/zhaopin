/*!
* @zpfe/stat-sdk@1.0.0-beta.29
* (c) 2018-2019 zhaopin.com
*/
var _zpStat=function(){"use strict";var n=!1;var r={getCookies:function(){var e={};try{for(var t=document.cookie?document.cookie.split("; "):[],r=0;r<t.length;r++){var o=t[r].split("=");e[o[0]]=decodeURIComponent(o[1])}return e}catch(t){return console.error("获取 cookies 失败",t),window.zpStat&&window.zpStat.error&&window.zpStat.error(t,"获取 cookies 失败"),e}},getCurrentUrlPath:function(t){var e="";return"string"==typeof t&&(e=t.replace(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,"$3/$5")),e},copyMembers:function(t,e){if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},addEventListener:function(t,e,r){t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent("on"+e,r)},removeEventListener:function(t,e,r){t.removeEventListener?t.removeEventListener(e,r):t.detachEvent("on"+e,r)}};var t,e,a=(!(t=window.zpStatConfig||(window.zpStatConfig={})).page&&(t.page={}),function(t){window.zpPageRequestId&&(t.x_zp_page_request_id=window.zpPageRequestId),t.current_url=document.location.href,t.referrer=document.referrer,t.appid||console.error("请配置zpStatConfig.page.appid");var e=r.getCookies();e.at&&e.rt&&(t.passport_at=e.at,t.passport_rt=e.rt)}((e=t).page),e),o="sa";function i(t){try{var e=t.getAttribute("zp-stat-id");if(!e)return{};for(var r={stat_id:e},o=t.attributes,n=0;n<o.length;n++){var a=o[n].name;"zp-stat-id"!==a&&(0==a.indexOf("zp-stat-")&&(r[a=a.substr(8).replace(/-/g,"_")]=o[n].value))}return r.track&&window.zpStat&&window.zpStat.track&&window.zpStat.track(r.track,r),r}catch(t){return window.zpStat&&window.zpStat.error&&window.zpStat.error(t.message,"提取自定义上报信息失败"),{}}}(function(t){try{var e=t.sdk_url,r=t.name,o=window,n=document,a=null,i=null;o.sensorsDataAnalytic201505=r,o[r]=o[r]||function(t){return function(){(o[r]._q=o[r]._q||[]).push([t,arguments])}};for(var s=["track","quick","register","registerPage","registerOnce","trackSignup","trackAbtest","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink","clearAllRegister","getAppStatus"],c=0;c<s.length;c++)o[r][s[c]]=o[r].call(null,s[c]);o[r]._t||(a=n.createElement("script"),i=n.getElementsByTagName("script")[0],a.async=1,a.src=e,a.setAttribute("charset","UTF-8"),i.parentNode.insertBefore(a,i),o[r].para=t)}catch(t){console.error("神策SDK默认初始化错误",t)}})(function(){var t=function(){var t={A1:"zlbusiness",A:"zlclient",B:"highpin",E1:"zlcrm",E:"itoa",F:"production",G14:"zlclient",G:"production",H:"zlclient",J:"zlbschool",K:"hremail",L:"production"};if(n)return"default";var e=a.page.appid,r=e.substr(0,2),o=e.substr(0,1);return t[e]?t[e]:t[r]?t[r]:t[o]?t[o]:"default"}(),e={sdk_url:"https://statistic.zhaopin.cn/sdk/sa/1.12.6/sa.min.js",heatmap_url:"https://statistic.zhaopin.cn/sdk/sa/1.12.6/heap_map.min.js",name:o,show_log:!!n,web_url:"https://dsm.zhaopin.cn/?project="+t,server_url:"https://ds.zhaopin.cn/sa?project="+t,heatmap:{custom_property:i}};r.copyMembers(e,a.sa);try{void 0!==window.localStorage&&void 0!==window.localStorage.zpfe_stat_sa_show_log&&(e.show_log="true"===window.localStorage.getItem("zpfe_stat_sa_show_log"))}catch(t){}return e}()),window[o].registerPage&&window[o].registerPage(a.page),!0!==a.isSPA&&window[o].quick&&window[o].quick("autoTrack");function s(t){return window.sa&&window.sa[t]}window.zpStat={track:function(t,e,r){s("track")&&window.sa.track(t,e,r)},login:function(t){s("login")&&window.sa.login(t)},logout:function(t){s("logout")&&window.sa.logout(t)},setProfile:function(t,e){s("setProfile")&&window.sa.setProfile(t,e)},error:function(t,e){t&&(console.error(e,t),s("track")&&window.sa.track("zp_ui_error",{zp_ui_error_message:t.message,zp_ui_error_stack:t.stack,zp_ui_error_description:e,current_url_path:c(document.location.href)}))},refreshPageConfig:function(){s("track")&&window.sa.registerPage(window.zpStatConfig&&window.zpStatConfig.page)},switchPage:function(){var t=this;s("quick")&&(window.zpStatConfig.page.referrer=window.zpStatConfig.page.current_url,setTimeout(function(){window.zpStatConfig.page.current_url=document.location.href,t.refreshPageConfig(),window.sa.quick("autoTrackSinglePage")},100))}};var c=r.getCurrentUrlPath;!function(){var t=window.XMLHttpRequest;if(t){var i=t.prototype.open;t.prototype.open=function(){for(var t=window.zpPageRequestId,e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var n=r[1],a=n;try{t&&(a+=(-1<n.indexOf("?")?"&":"?")+"x-zp-page-request-id="+t),r[1]=a,i.apply(this,r)}catch(t){console.error("执行 XMLHttpRequest open 出错",t),window.zpStat&&window.zpStat.error&&window.zpStat.error(t,"执行 XMLHttpRequest open 出错")}}}}();r.addEventListener(window,"error",function(t){var e;(e=t).error&&e.error.stack&&-1!=e.error.stack.indexOf(".zhaopin.c")&&(window.zpStat&&window.zpStat.error?window.zpStat.error(t.error,"发现未捕获的错误"):console.error("发现未捕获的错误",t.error))});var p=3e4;function d(t,e){var r=Math.abs(parseInt(e-t));return p<r&&(r=0),r}r.addEventListener(window,"load",function(){var t=function(){if(!window.performance||!window.performance.timing)return null;var t=window.performance.timing,e=d(t.redirectStart,t.redirectEnd),r=d(t.domainLookupStart,t.domainLookupEnd),o=d(t.connectStart,t.connectEnd),n=d(t.requestStart,t.responseStart),a=d(t.responseStart,t.responseEnd),i=d(t.navigationStart,t.domContentLoadedEventEnd),s=d(t.navigationStart,t.responseStart),c=d(t.domInteractive,t.domComplete),p=d(t.navigationStart,t.domComplete);return{zp_performance_redirect:e,zp_performance_domain_lookup:r,zp_performance_tcp:o,zp_performance_request:n,zp_performance_response:a,zp_performance_dom_content_load:i,zp_performance_response_start:s,zp_performance_dom_processing:c,zp_performance_dom_complete:p}}();t&&window.zpStat.track("zp_ui_performance",t)});return{}}();
